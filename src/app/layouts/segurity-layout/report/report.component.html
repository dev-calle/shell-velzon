<div class="card">
    <div class="card-header">
        <h4 class="card-title">Reporte General</h4>
    </div>
    <div class="card-body">
        <form class="container mb-3" [formGroup]="formSearch" (ngSubmit)="onSearch()">
            <div class="row">
                <div class="col-lg-2">
                    <label for="date" class="form-label my-1 float-end">Fecha de inicio</label>
                </div>
                <div class="col-lg-3">
                    <input class="form-control flatpickr-input" type="text" mwlFlatpickr
                    [altInput]="true" altFormat="d/m/Y" [convertModelValue]="true"
                    placeholder="Seleccione una fecha de inicio" formControlName="dateStart">
                </div>
                
                <div class="col-lg-2">
                    <label for="date" class="form-label my-1 float-end">Fecha de fin</label>
                </div>
                <div class="col-lg-3">
                    <input class="form-control flatpickr-input" type="text" mwlFlatpickr
                    [altInput]="true" altFormat="d/m/Y" [convertModelValue]="true"
                    placeholder="Seleccione una fecha de fin" formControlName="dateEnd">
                </div>
                
            </div>
            <div class="row mt-3">
                <div class="col-lg-2">
                    <label for="date" class="form-label my-1 float-end">Proyecto</label>
                </div>
                <div class="col-lg-3">
                    <ng-select [items]="projects" formControlName="project" bindLabel="name"
                        bindValue="id" placeholder="Agregue un proyecto" [multiple]="true"
                        [class.is-invalid]="formSearch.get('project')?.invalid && formSearch.get('project')?.touched">
                    </ng-select>
                </div>
                <div class="col-lg-2">
                    <label for="date" class="form-label my-1 float-end">Actividad</label>
                </div>
                <div class="col-lg-3">
                    <ng-select [items]="activities" formControlName="activity" bindLabel="name"
                        bindValue="id" placeholder="Agregue una actividad" [multiple]="true"
                        [class.is-invalid]="formSearch.get('activity')?.invalid && formSearch.get('activity')?.touched">
                    </ng-select>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-lg-2">
                    <label for="date" class="form-label my-1 float-end">Usuario</label>
                </div>
                <div class="col-lg-8">
                    <ng-select [items]="users" formControlName="users" bindLabel="name"
                        bindValue="id" placeholder="Agregue un usuario" [multiple]="true"
                        [class.is-invalid]="formSearch.get('users')?.invalid && formSearch.get('users')?.touched">
                    </ng-select>
                </div>
                <button class="col-lg-2 btn btn-primary">Buscar</button>
            </div>
        </form>
        <hr>
        <div class="table-responsive">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th scope="col" *ngFor="let column of columns">
                            <span class="d-flex align-items-center gap-1" [ngClass]="{ 'column-order': column.order }">
                                {{ column.text }}
                                <i class="ri-arrow-up-s-fill" *ngIf="column.active && column.order"></i>
                            </span>
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let event of eventsTimesheet">
                        <td>{{ event.fecha | date: 'dd/MM/YYYY HH:mm a' }}</td>
                        <td>{{ event.proyecto }}</td>
                        <td>{{ event.actividad }}</td>
                        <td>{{ event.usuario }}</td>
                        <td>{{ event.hora }}</td>
                        <td>{{ event.observacion }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <app-pagination [totalPages]="totalPages" [currentPage]="currentPage"
        (pageChanged)="onPageChanged($event)"></app-pagination>
    </div>
</div>